<template>
    <div class="vue-app-container">
        <section class="classes-image" style="padding: 0px;padding-top: 50px; padding-bottom: 50px;">
            <div class="container-fluid">
                <div class="row">
                    <div class="col-md-12" style="padding: 0">
                        <div class="fight-bg">
                            <div class="fight-bg-image">
                                <img class="responsive_image" src="https://metrotech.gg/assets/images/bg-banner/ac_mine_craft.jpg">
                            </div>
                            <div class="fight-logos">
                                <a href="#">  <img class="metro_logo" src="https://metrotech.gg/assets/images/bg-banner/metro_black_logo.png"></a>
                                <a href="https://doctorbattles.com "><img class="header_bank_logo" src="https://metrotech.gg/assets/images/bg-banner/header_bank_logo.png"></a>
                                <a href="https://gamers.vote"> <img class="gamevote" src="https://metrotech.gg/assets/images/bg-banner/gamevote.png"></a>
                            </div>

                        </div>
                    </div>
                </div>
            </div>
        </section>

        <section class="classes-kind" style="padding-top: 1px;">
            <div class="container">
                <div class="row">
                    <div class="col-md-12" style="text-align: center;">
                        <div style="color: white; background-color: black;">
                            <h2 style="padding-top: 10px;padding-bottom: 10px;margin-top: 0px;margin-bottom: 0px;color: white">Trailer</h2>
                            <p style="font-weight: bold;">Live Streaming</p>
                            <div style="height: 0px;  padding-bottom: 56.7%;">
                                <iframe frameborder="0" style="width: calc(100% - 30px);height: 100%;position: absolute;left: 15px;" allow="autoplay; encrypted-media" allowfullscreen="" data-src="https://www.youtube.com/embed/BEH_fMgRNrc" class="lazyloaded" src="https://www.youtube.com/embed/BEH_fMgRNrc"></iframe>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <section class="class-details">
            <div class="container">
                <div class="row">
                    <div class="col-md-12 section_info" style="text-align: center;">
                        <h4 style="text-align: left">This is an introduction to Mine Craft, and Esports in general.  Various special guest streamers will guide Student participants in various Mine Craft activities.   Some of the known benefits are:</h4>
<!--                        <h4>Get ready to represent your NFL FLAG league and prove who's the best on the digital turf!<br><br>Metro Esports can help you shine on the digital playing field.</h4>-->
                        <ul style="list-style: circle; margin-left: 50px; font-size: 20px;text-align: left;">
                            <li>Improves problem-solving skills</li>
                            <li>Improves coordination</li>
                            <li>Enhances memory</li>
                            <li>Improves attention and concentration</li>
                            <li>It is a great source of learning</li>
                            <li>Improves the brain's speed</li>
                            <li>Enhances multitasking skills</li>
                            <li>Improves social skills</li>
                            <li>Improves problem-solving skills</li>
                        </ul>
                        <h4 style="margin-top: 50px;">Powered By:</h4>
                        <a href="https://doctorbattles.com/parent_league/profile/leagues/36" target="_blank">
                            <img width="470" height="116" alt="" data-srcset="https://metrotech.gg/assets/images/bg-banner/adjusted.png 470w, https://metrotech.gg/assets/images/bg-banner/adjusted.png 300w, https://metrotech.gg/assets/images/bg-banner/adjusted.png 20w" data-src="https://metrotech.gg/assets/images/bg-banner/adjusted.png" data-sizes="(max-width: 470px) 100vw, 470px" class="attachment-large size-large lazyloaded" src="https://metrotech.gg/assets/images/bg-banner/adjusted.png" sizes="(max-width: 470px) 100vw, 470px" srcset="https://metrotech.gg/assets/images/bg-banner/adjusted.png 470w, https://metrotech.gg/assets/images/bg-banner/adjusted.png 300w, https://metrotech.gg/assets/images/bg-banner/adjusted.png 20w">
                        </a>
                        <h5>
                            The Minecraft sessions will be streamed live on this page. To follow along, log-on to our server with the information provided. The streaming schedules are below:
                        </h5>
                    </div>
                </div>
            </div>
        </section>

<!--        <section class="class-details" style="margin-bottom: 0px;">-->
<!--            <div class="container">-->
<!--                <div class="row">-->
<!--                    <div class="col-md-12 section_prize">-->
<!--                        <div class="section_content">-->
<!--                            <h1 class="elementor-heading-title elementor-size-default">Prize Structure</h1>-->
<!--                            <div class="rank">-->
<!--                                <h2 class="elementor-heading-title elementor-size-default">ðŸ¥‡First Place</h2>-->
<!--                                <h3 class="elementor-heading-title elementor-size-default white-text">â€¢  $1,500 cash, $1,500 scholorship, 1500 DB Prize Tokens, X- In-game currency</h3>-->
<!--&lt;!&ndash;                                <h3 class="elementor-heading-title elementor-size-default"><a href="/coaching">â€¢ 3x Metro Pro Esports Coaching Sessions!</a></h3>&ndash;&gt;-->
<!--                            </div>-->
<!--                            <div class="rank">-->
<!--                                <h2 class="elementor-heading-title elementor-size-default">ðŸ¥ˆSecond Place</h2>-->
<!--                                <h3 class="elementor-heading-title elementor-size-default white-text">â€¢ $750 cash ,  $750 scholorship, 750 DB Prize Tokens, X - In-game currency</h3>-->
<!--&lt;!&ndash;                                <h3 class="elementor-heading-title elementor-size-default"><a href="/coaching">â€¢ 2x Metro Pro Esports Coaching Sessions!</a></h3>&ndash;&gt;-->
<!--                            </div>-->
<!--                            <div class="rank">-->
<!--                                <h2 class="elementor-heading-title elementor-size-default">ðŸ¥‰Third Place</h2>-->
<!--                                <h3 class="elementor-heading-title elementor-size-default white-text">â€¢ $250 cash,  $250 scholorship, 250 DB Prize Tokens,  X  In-game currency</h3>-->
<!--&lt;!&ndash;                                <h3 class="elementor-heading-title elementor-size-default"><a href="/coaching">â€¢ Metro Pro Esports Coaching Session!</a></h3>&ndash;&gt;-->
<!--                            </div>-->
<!--&lt;!&ndash;                            <h6 class="elementor-heading-title elementor-size-default" style="color: white;">All registered participants will receive a free 25 digital NFL Trade cards from Panini.</h6>&ndash;&gt;-->
<!--                        </div>-->
<!--                    </div>-->
<!--                </div>-->
<!--            </div>-->
<!--        </section>-->

        <section class="class-details" style="margin-top: 0px;">
            <div class="container">
                <div class="row">
                    <div class="col-md-12 section_schedule">
                        <div class="section_schedule_content">
                            <h1 class="elementor-heading-title elementor-size-default"> Schedule </h1>
                            <div class="rank">
<!--                                <h3 class="elementor-heading-title elementor-size-default">TBD COMING SOON</h3>-->
<!--                                <h3 class="elementor-heading-title elementor-size-default" style="font-weight: lighter;">Tournament Starts : 12PM EST</h3>-->
                                <!--<ul class="schedule_list">
                                    <li>
                                        August 14th, 2020 @ 4:30 pm EST
                                    </li>
                                    <li>
                                        August 21st, 2020 @ 4:30 pm EST
                                    </li>
                                    <li>
                                        August 28th, 2020 @4:30 pm EST
                                    </li>
                                </ul>-->
                                <div class="schedule_announce">To Be Announced</div>
                            </div>

                        </div>
                    </div>
                </div>
            </div>
        </section>
        <section class="class-details">
            <div class="container">
<!--                <div class="row" style="flex: 1; display: flex; flex-direction: row; justify-content: center; margin-top: 30px; margin-bottom: 30px;flex-wrap: wrap">-->
<!--                    <div class="col-md-3 col-sm-6" style="margin-left: 10px;margin-right: 10px;">-->
<!--                        <div class="store-list-item">-->
<!--                            <div>-->
<!--                                <div class="team-container">-->
<!--                                    <p class="custom-content">Join the Tournament</p>-->
<!--                                    <img src="/assets/images/bg-banner/tournament_1.jpg"-->
<!--                                         class="team-image">-->
<!--                                </div>-->
<!--                                <div class="info">-->
<!--                                    <span class="name">Mortal Kombat 11</span>-->
<!--                                    <div class="btn-wrap">-->
<!--                                        <a class="btn btn-block small" href="https://doctorbattles.com/tour/page/main_page/33/28" target="_blank">REGISTER</a>-->
<!--                                    </div>-->
<!--                                </div>-->
<!--                            </div>-->
<!--                        </div>-->
<!--                    </div>-->
<!--                </div>-->
                <div class="row">
                    <div class="col-md-12 section_info" style="text-align: center;">
                        <h1>Media</h1>
                        <h4>For real-time event results/updates, and to participate in the @NFLFlagMadden social media contest, follow Metro Esports on:</h4>
                        <div class="button_list">
                            <a class="elementor-icon elementor-social-icon elementor-social-icon-twitch elementor-repeater-item-d0e13c4"
                               href="https://www.twitch.tv/metroesportslive" target="_blank">
                                <span class="elementor-screen-only"></span>
                                <i class="fa fa-twitch"></i> </a>
                            <a class="elementor-icon elementor-social-icon elementor-social-icon-youtube elementor-repeater-item-d89a043"
                               href="https://www.youtube.com/channel/UC78Zr2pU8nP7_MHvZg5LynQ" target="_blank">
                                <span class="elementor-screen-only"></span>
                                <i class="fa fa-youtube"></i> </a>
                            <a class="elementor-icon elementor-social-icon elementor-social-icon-instagram elementor-repeater-item-7f32ac9"
                               href="https://www.instagram.com/metroesportsus/" target="_blank">
                                <span class="elementor-screen-only"></span>
                                <i class="fa fa-instagram"></i> </a>
                            <a class="elementor-icon elementor-social-icon elementor-social-icon-facebook elementor-repeater-item-474e788"
                               href="https://www.facebook.com/MetroEsportsUS" target="_blank">
                                <span class="elementor-screen-only"></span>
                                <i class="fa fa-facebook"></i> </a>
                            <a class="elementor-icon elementor-social-icon elementor-social-icon-twitter elementor-repeater-item-84e5d10"
                               href="https://twitter.com/MetroEsportsUS" target="_blank">
                                <span class="elementor-screen-only"></span>
                                <i class="fa fa-twitter"></i> </a>
                        </div>
<!--                        <h1>Rules</h1>-->
<!--                        <iframe style="width: 100%; height: 400px;" data-src="https://drive.google.com/file/d/134QmchYOgzm8FZmGT02P_dcRfsnMshBt_2UTKWLslno/preview" class=" lazyloaded" src="https://drive.google.com/file/d/134QmchYOgzm8FZmGT02P_dcRfsnMshBt_2UTKWLslno/preview"></iframe>-->
                    </div>
                </div>
            </div>
        </section>
        <!--MAIN TEAM STORE END-->
        <section class="partners" v-if="homePages.partner">
            <div class="container">
                <div class="row">
                    <h4 class="text-center-on-mb">{{homePages.partner_title}}</h4>
                    <div v-for="(partner, index) in partners" :key="partner.id"
                         class="col-md-3 col-sm-6  text-center sponsor-icons-wrapper">
                        <a :href="partner.partner_link" target="_blank">
                            <img :src="'/storage/img/partner/' + partner.image_link" class="sponsor-icons-custom"
                                 alt="partner image">
                        </a>
                    </div>
                </div>
            </div>
        </section>
    </div>
</template>

<script>
    import pfetch from "../pfetch/pfetch";
    export default {
        name: "AcMineCraft",
        data(){
            return{
                access_token:null,
                leagueId:85,
                homePages: {},
                partners: {},
            }
        },
        created() {
            this.loadToken();
            this.getHomepages();
            this.getPartners();
        },
        methods:{
            async getHomepages() {
                const url = 'v1/homepages';
                const res = await pfetch(url);
                if (res) {
                    this.homePages = (res);
                    console.log(this.homePages);
                }
            },
            async getPartners() {
                const url = 'v1/partners/get_data';
                const res = await pfetch(url);
                if (res) {
                    this.partners = res;
                }
            },
            async loadToken(){
                const url = 'api/token';
                const res = await pfetch(url);
                if(res.token){
                    this.access_token = res.token;
                }
            },
            joinLeague(){
                try{
                    if (!this.access_token) {
                        window.location.href = '/signin_with_doctorbattles';
                        return;
                    }
                    let postData = {
                        league_id: this.leagueId
                    };
                    const url = 'https://doctorbattles.com/api/v1/auto_join_league';
                    console.log(this.access_token);
                    $.ajax({
                        url: url,
                        method: 'POST',
                        dataType: 'json',
                        data: postData,
                        headers: {
                            'Authorization': 'Bearer ' + this.access_token,
                        },
                        success: function(res) {
                            if(res.status != 'OK') {
                                if(res.response_txt){
                                    alert(res.response_txt);
                                }else{
                                    console.log(res);
                                }
                            }else if(res.response_txt != ''){
                                alert(res.response_txt)
                            }
                        },
                        error: function(e) {
                            console.log(e);
                            if(e.status === 401){
                                window.location.href = '/signin_with_doctorbattles';
                            }
                        }
                    });
                }catch (e) {
                    console.log(e);
                }
            },
            createAutoTeam(postData, callback) {
                let data = {
                    team_name: postData.team_name,
                    platform_id: 0,
                    game_id: 0,
                    region_id: 0,
                    video_link: "",
                    bio_content: "",
                    file_name: null,
                    banner_image: null,
                    group_id: 0,
                    proceed: 1,
                    league_id: postData.league_id
                };

                $.ajax({
                    url: 'https://doctorbattles.com/api/v1/team_mg/child/join_auto_team',
                    method: 'POST',
                    dataType: 'JSON',
                    data: data,
                    headers: {
                        'Authorization': 'Bearer ' + access_token
                    },
                    success: function(res) {
                        if(res.status == 'OK') {
                            callback();
                        }
                    },
                    error: function() {}
                })
            }
        }
    }
</script>

<style scoped lang="scss">
    @import '../../../sass/theme/css/classes.css';
    .professional_btn{
        color: white;
        background: #5E8208;
        padding: 15px 30px;
        border-radius: 30px;
        border: none;
        margin: 15px 0;
    }
    .professional_row{
        padding: 30px 0;
    }
    .professional_row .col-md-3{
        text-align: center;
        height: 50px;
    }
    .schedule_list{
        list-style-type: none;
        li{
            font-size: 17px;
            padding: 10px 0;
            color: #20409a;
        }
    }
    .schedule_announce{
        text-align: center;
        font-size: 21px;
        text-transform: uppercase;
        font-weight: bold;
    }
</style>
